<h1>Video</h1>

<video id="myVideo" width="1280" controls autoplay controlsList="nodownload">
    <source src="http://files.cod3r.com.br/curso-web/video.mp4" type="video/mp4">
</video>

<div wm-progress="myVideo" class="progress">
    <div></div>
</div>
<div>
    <button wm-play="myVideo">Play</button>
    <button wm-pause="myVideo">Pause</button>
</div>

<style>
    .progress{
        height: 20px;
        width: 1280px;
        border: solid 1px #444;
        margin: 0.1em;
    }

    .progress > div {
        background-color: red;
        color: #fff;
        height: 100%;
        text-align: right;
        font-size: 14px;
        width: 0%;
    }

</style>

<!--Teacher's solution-->
<script>
    function videoConfig(id){
        const video = document.getElementById(id)
        video.oncontextmenu = () => false

        document.querySelector(`[wm-play=${id}]`).onclick = e => video.play()
        document.querySelector(`[wm-pause=${id}]`).onclick = e => video.pause()

        setInterval( () => {
            const percentage = (video.currentTime/video.duration) * 100
            const valueDiv = document.querySelector(`[wm-progress=${id}] > div`)
            valueDiv.style.width = `${percentage}%`
            valueDiv.innerHTML = `${percentage.toFixed(1)}%`
        }, 50)
    }

    videoConfig("myVideo")

</script>

<!--
<script>
    const video = document.getElementById("myVideo")
    const duration = video.duration

    const progressBar = document.querySelector(".progress > div")
    progressBar.style.width = "0%"
    
    video.ontimeupdate = function(){
        const v = (video.currentTime/video.duration * 100).toFixed(0)
        progressBar.style.width = `${v}%`
    }
    
    const play = document.querySelector("[wm-play]")
    play.onclick = function(e){
        video.play()
    }

    const pause = document.querySelector("[wm-pause]")
    pause.onclick = function(e){
        video.pause()
    }

</script>
-->